pipeline {
 agent { label 'master' }
 stages {

   stage('checkout') {
       steps {
           script {
               echo "TARGET_ENVIRONMENT: ${params.TARGET_ENVIRONMENT}"
               // send build started notifications
               //slackSend (color: '#FFFF00', message: "STARTED: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]' Environment: ${params.TARGET_ENVIRONMENT} (${env.BUILD_URL})", channel: "#duplicate-task-query", tokenCredentialId:"slack-token")
                   echo 'checkout the code from the develop'
                   git(branch: 'test-branch',credentialsId: '953d64180b394ebc42344d07358aa6ca3167a5b6', url: 'https://github.com/khagenrai/forgaming_Purpose.git', changelog: true)
           }
       }
   }
   
   /*stage('deploy') {
     steps {
       script {
           echo "TARGET_ENVIRONMENT: ${params.TARGET_ENVIRONMENT}"
           if("${params.TARGET_ENVIRONMENT}" == "DEV") {
               echo 'list out Azure resource list only'
               withCredentials([azureServicePrincipal(credentialsId: 'b1fd1d69-89de-4b84-aaf5-d1083c8a1c3b',
                                   subscriptionIdVariable: 'SUBSCRIPTIONIDVARIABLE',
                                   clientIdVariable: 'CLIENTIDVARIABLE',
                                   clientSecretVariable: 'CLIENTSECRETVARIABLE',
                                   tenantIdVariable: 'TENANTIDVARIABLE')]) {
                   sh 'echo subscriptionIdVariable=$SUBSCRIPTIONIDVARIABLE clientIdVariable=$CLIENTIDVARIABLE clientSecretVariable=$CLIENTSECRETVARIABLE tenantIdVariable=$TENANTIDVARIABLE'
                   sh 'az login --service-principal -u $CLIENTIDVARIABLE -p $CLIENTSECRETVARIABLE -t $TENANTIDVARIABLE'
                   sh 'az account set -s $SUBSCRIPTIONIDVARIABLE'
                   sh 'az resource list'
                   //sh 'az webapp stop -g EVO_Data_Grinder_INT  -n euevoawain030'
                   //sh 'az webapp deployment source config-zip -g EVO_Data_Grinder_INT  -n euevoawain030  --src /tmp/evodashboard-${BUILD_NUMBER}.zip'
                   //sh 'az webapp start -g EVO_Data_Grinder_INT  -n euevoawain030'
           }
        }
   }
}*/
 /*post {
   success {
       slackSend (color: '#00FF00', message: "SUCCESSFUL: this is not a Deployment '${env.JOB_NAME} [${env.BUILD_NUMBER}]' Environment: ${params.TARGET_ENVIRONMENT} (${env.BUILD_URL})", channel: "#duplicate-task-query", tokenCredentialId:"slack-token")
   }
   failure {
       slackSend (color: '#FF0000', message: "FAILED: this is not a Deployment '${env.JOB_NAME} [${env.BUILD_NUMBER}]' Environment: ${params.TARGET_ENVIRONMENT} (${env.BUILD_URL})", channel: "#duplicate-task-query", tokenCredentialId:"slack-token")
   }*/
 }
}
